<LightsScreen>:
    name: "lights"

    MDBoxLayout:
        orientation: "vertical"
        padding: "24dp"
        spacing: "16dp"

        MDLabel:
            text: "ðŸ’¡ Select a Room"
            halign: "center"
            font_style: "H5"
            size_hint_y: None
            height: self.texture_size[1]

        MDBoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: "48dp"
            spacing: "12dp"
            pos_hint: {"center_x": 0.5}

            MDButton:
                text: "Bedroom"
                style: "elevated"
                on_release: root.handle_room_selection("Bedroom")

            MDButton:
                text: "Living Room"
                style: "elevated"
                on_release: root.handle_room_selection("Living Room")

            MDButton:
                text: "Kitchen"
                style: "elevated"
                on_release: root.handle_room_selection("Kitchen")

        # Conditional Light Controls
        BoxLayout:
            orientation: "vertical"
            spacing: "16dp"
            padding: "12dp"
            opacity: 1 if root.selected_room else 0
            disabled: not root.selected_room

            MDLabel:
                text: f"Controls for {root.selected_room}"
                halign: "center"
                font_style: "H6"

            # Light On/Off Switch
            MDBoxLayout:
                orientation: "horizontal"
                spacing: "12dp"
                MDLabel:
                    text: "Lights On/Off"
                    halign: "left"
                MDSwitch:
                    pos_hint: {"center_y": 0.5}
                    active: root.light_on
                    on_active: root.toggle_light(self.active)

            # Color Control
            MDLabel:
                text: "ðŸŽ¨ Hue Selector"
                halign: "center"
                font_style: "Subtitle1"

            MDSlider:
                min: 0
                max: 360
                value: root.hue
                on_value: root.on_color_change(self, self.value)
                hint: True
                color: [1, 0, 0, 1]  # red start
                background_gradient_color: [(1, 0, 0, 1), (1, 1, 0, 1), (0, 1, 0, 1), (0, 1, 1, 1), (0, 0, 1, 1), (1, 0, 1, 1)]

            # Brightness Control
            MDLabel:
                text: "ðŸ”† Brightness"
                halign: "center"
                font_style: "Subtitle1"

            MDSlider:
                min: 0
                max: 100
                value: root.brightness
                on_value: root.on_brightness_change(self, self.value)
                hint: True
                color: [1, 1, 0, 1]
                background_gradient_color: [(0, 0, 0, 1), (1, 1, 0, 1)]
